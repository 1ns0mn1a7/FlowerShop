{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Flower Shop</title>
        <script src="https://js.stripe.com/v3/"></script>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Unbounded:wght@700&display=swap" rel="stylesheet">
    <script src="{% static 'js/order_s.js' %}"></script>
    <meta name="stripe-publishable-key" content="{{ STRIPE_PUBLISHABLE_KEY }}">
	<link rel="stylesheet" href="{% static 'css/main.css' %}">
</head>

<body>
	<header id="header">
		<div class="container">
			<div class="header ficb">
				<a href="{% url 'index' %}">
					<img src="{% static 'img/logo.svg' %}" alt="logo" class="logo">
				</a>
				<nav>
					<ul class="menu ficc">
						<li class="menu__item"><a href="{% url 'catalog' %}" class="menu__item_link">Каталог</a></li>
						<li class="menu__item"><a href="#" class="menu__item_link">Рекомендации</a></li>
						<li class="menu__item"><a href="#contacts" class="menu__item_link">Контакты</a></li>
					</ul>
				</nav>
			</div>
		</div>
	</header>
	
	<section id="orderStep">
		<div class="container">
			<div class="order orderStep">
				<div class="order__block">
					<div class="order_items">
						<div class="title">Оплата</div>

                        <!-- Блок для отображения ошибок -->
                        {% if error %}
                        <div class="error-message" style="color: red; margin-bottom: 20px;">
                            {{ error }}
                        </div>
                        {% endif %}

                        <form id="payment-form" method="post" class="order__form orderStep_form">
                            {% csrf_token %}
                            <input type="hidden" name="bouquet_id" value="{{ order_data.bouquet_id }}">

                            <div class="order__form_block">
                                <div class="order__form_items">
                                    <div class="order__form_intro">Данные карты</div>

                                    <div id="card-element" class="order__form_input orderStep_form_input" style="padding: 10px;">
                                    </div>


                                    <div id="card-errors" role="alert" style="color: red; margin-top: 10px;"></div>
                                </div>

                                <div class="order__form_items">
                                    <div class="order__form_intro">Ваш e-mail (необязательно)</div>
                                    <input type="email" name="mail" class="order__form_input orderStep_form_input" placeholder="pochta@mail.ru">
                                </div>
                            </div>

                            <div class="order__form_line"></div>
                            <div class="order__form_btns ficb">
                                <button type="submit" class="btn order__form_pay" id="submit-button">
                                    <span id="button-text">Оплатить</span>
                                    <div id="spinner" style="display: none;">Обработка...</div>
                                </button>
                                <button type="button"
                                        data-back-url="{% url 'order' %}"
                                        data-bouquet-id="{{ order_data.bouquet_id }}"
                                        class="btn order__form_btn">Назад</button>
                            </div>
                        </form>
					</div>
				</div>
			</div>
		</div>
		<img src="{% static 'img/orderImg.jpg' %}" alt="orderImg" class="order__img">
	</section>

	<footer id="footer">
		<div class="container">
			<div class="footer">
				<a href="{% url 'index' %}">
					<img src="{% static 'img/logo.svg' %}" alt="logo" class="logo footer__logo">
				</a>
				<nav>
					<ul class="menu footer__menu ficc">
						<li class="menu__item"><a href="{% url 'catalog' %}" class="menu__item_link">Каталог</a></li>
						<li class="menu__item"><a href="#" class="menu__item_link">Рекомендации</a></li>
						<li class="menu__item"><a href="#contacts" class="menu__item_link">Контакты</a></li>
					</ul>
				</nav>
				<hr class="line"></hr>
				<a href="#" class="footer__poli">Политика конфиденциальности</a>
				<p class="footer_cop">©️2022. FlowerShop. Все права защищены</p>
			</div>
		</div>
	</footer>
</body>
</html>